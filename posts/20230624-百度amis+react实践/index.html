<!doctype html><html lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>百度Amis+React实践 - Plumliil Blogs</title><meta name=Description content="This is my cool site"><meta property="og:url" content="https://plumliil.cn/posts/20230624-%E7%99%BE%E5%BA%A6amis+react%E5%AE%9E%E8%B7%B5/">
<meta property="og:site_name" content="Plumliil Blogs"><meta property="og:title" content="百度Amis+React实践"><meta property="og:description" content="背景 在项目中有集成低代码平台的想法,经过多方对比最后选择了 amis,主要是需要通过 amis 进行页面配置,导出 json 供移动端和 PC 端进行渲染,所以接下来讲"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-06-24T17:09:03+08:00"><meta property="article:modified_time" content="2023-06-24T17:09:03+08:00"><meta property="article:tag" content="React"><meta property="article:tag" content="Amis"><meta property="article:tag" content="低代码"><meta name=twitter:card content="summary"><meta name=twitter:title content="百度Amis+React实践"><meta name=twitter:description content="背景 在项目中有集成低代码平台的想法,经过多方对比最后选择了 amis,主要是需要通过 amis 进行页面配置,导出 json 供移动端和 PC 端进行渲染,所以接下来讲"><meta name=application-name content="Plumliil Blog"><meta name=apple-mobile-web-app-title content="Plumliil Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=icon href=https://s2.loli.net/2022/12/27/gAaOJRVl7iTBbGh.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://plumliil.cn/posts/20230624-%E7%99%BE%E5%BA%A6amis+react%E5%AE%9E%E8%B7%B5/><link rel=prev href=https://plumliil.cn/posts/20230507-react%E4%BD%BF%E7%94%A8%E4%B8%AD%E5%B8%B8%E7%8A%AF%E7%9A%84%E9%94%99%E8%AF%AF/><link rel=next href=https://plumliil.cn/posts/20230702-react%E4%B8%AD%E7%BC%96%E5%86%99%E8%87%AA%E5%AE%9A%E4%B9%89hook/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"百度Amis+React实践","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/plumliil.cn\/posts\/20230624-%E7%99%BE%E5%BA%A6amis\u002breact%E5%AE%9E%E8%B7%B5\/"},"image":["https:\/\/s2.loli.net\/2022\/04\/05\/qa4sCStuDX5gyBb.png"],"genre":"posts","keywords":"React, Amis, 低代码","wordcount":3142,"url":"https:\/\/plumliil.cn\/posts\/20230624-%E7%99%BE%E5%BA%A6amis\u002breact%E5%AE%9E%E8%B7%B5\/","datePublished":"2023-06-24T17:09:03+08:00","dateModified":"2023-06-24T17:09:03+08:00","publisher":{"@type":"Organization","name":"","logo":"https:\/\/s2.loli.net\/2022\/04\/05\/qa4sCStuDX5gyBb.png"},"author":{"@type":"Person","name":"Plumliil"},"description":""}</script></head><body data-header-desktop=auto data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"light"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"light"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Plumliil Blogs"><img class="lazyload logo" src=/svg/loading.min.svg data-src=https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png data-srcset="https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png, https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png 1.5x, https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png 2x" data-sizes=auto alt=https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png title=https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png><span id=id-1 class=typeit></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Plumliil Blogs"><img class="lazyload logo" src=/svg/loading.min.svg data-src=https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png data-srcset="https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png, https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png 1.5x, https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png 2x" data-sizes=auto alt=https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png title=https://s2.loli.net/2022/04/05/qa4sCStuDX5gyBb.png><span id=id-2 class=typeit></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>文章</a><a class=menu-item href=/tags/ title>标签</a><a class=menu-item href=/categories/ title>分类</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">百度Amis+React实践</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Plumliil</a></span>&nbsp;<span class=post-category>included in <a href=/categories/%E5%89%8D%E7%AB%AF%E7%AF%87/><i class="far fa-folder fa-fw" aria-hidden=true></i>前端篇</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2023-06-24>2023-06-24</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;3142 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;7 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#背景>背景</a></li><li><a href=#什么是-amis>什么是 amis</a></li><li><a href=#如何使用-amis>如何使用 amis</a></li><li><a href=#amis>amis</a></li><li><a href=#amis-editor>amis-editor</a></li><li><a href=#自定义组件>自定义组件</a></li><li><a href=#其他>其他</a></li><li><a href=#写在最后>写在最后</a></li></ul></li></ul></nav></div></div><div class=content id=content><h3 id=背景>背景</h3><p>在项目中有集成低代码平台的想法,经过多方对比最后选择了 amis,主要是需要通过 amis 进行页面配置,导出 json 供移动端和 PC 端进行渲染,所以接下来讲一下近两周研究 amis 的新的以及一些简单经验,供大家参考.</p><h3 id=什么是-amis>什么是 amis</h3><p>amis 是一个低代码前端框架，它使用 JSON 配置来生成页面，可以减少页面开发工作量，极大提升效率。</p><h3 id=如何使用-amis>如何使用 amis</h3><p>在 amis 官网提供了两种使用 amis 的方式分别是</p><ul><li>JSSDK 可以在任意页面使用</li><li>React 可以在 React 项目中使用</li></ul><p>博主是在 umi 框架下结合 React 使用 amis,所以本文主要着重介绍第二种方法</p><p>在使用时需要对 amis 进行安装,项目中也需要使用 amis-editor 进行页面配置所以需要同时安装如下两个包</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;amis&#34;</span><span class=p>:</span> <span class=s2>&#34;^3.1.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;amis-editor&#34;</span><span class=p>:</span> <span class=s2>&#34;^5.4.1&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h3 id=amis>amis</h3><p>首先介绍 amis,amis 提供了 render 方法来对 amis-editor 生成的 JSON 对象页面配置进行渲染,如下,在使用是 render 主要作用就是进行渲染</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>render</span> <span class=nx>as</span> <span class=nx>renderAmis</span> <span class=p>}</span> <span class=nx>from</span> <span class=s2>&#34;amis&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>App</span> <span class=o>=</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>renderAmis</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>type</span><span class=o>:</span> <span class=s2>&#34;button&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;保存&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>level</span><span class=o>:</span> <span class=s2>&#34;primary&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>onClick</span><span class=o>:</span> <span class=kd>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;TEST&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>})}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>App</span><span class=p>;</span>
</span></span></code></pre></div><h3 id=amis-editor>amis-editor</h3><p>amis-editor 提供了一个编译器组件 <code>&lt;Editor /></code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>useState</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Editor</span><span class=p>,</span> <span class=nx>setSchemaTpl</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>SchemaObject</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>render</span> <span class=kr>as</span> <span class=nx>renderAmis</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>Schema</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis/lib/types&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>// 以下样式均生效
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>import</span> <span class=s2>&#34;amis/lib/themes/default.css&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=s2>&#34;amis/lib/helper.css&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=s2>&#34;amis/sdk/iconfont.css&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=s2>&#34;amis-editor-core/lib/style.css&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=s2>&#34;amis-ui/lib/themes/antd.css&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>type</span> <span class=nx>Props</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>defaultPageConfig?</span>: <span class=kt>Schema</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>codeGenHandler</span><span class=o>?:</span> <span class=p>(</span><span class=nx>codeObject</span>: <span class=kt>Schema</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>pageChangeHandler</span><span class=o>?:</span> <span class=p>(</span><span class=nx>codeObject</span>: <span class=kt>Schema</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=k>void</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>Amis</span><span class=p>(</span><span class=nx>props</span>: <span class=kt>Props</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>mobile</span><span class=p>,</span> <span class=nx>setMobile</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>preview</span><span class=p>,</span> <span class=nx>setPreview</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=kc>false</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>defaultPageConfig</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>&lt;</span><span class=nt>Schema</span><span class=p>&gt;(</span><span class=nx>props</span><span class=p>.</span><span class=nx>defaultPageConfig</span><span class=p>);</span> <span class=c1>// 传入配置
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kr>const</span> <span class=nx>defaultSchema</span>: <span class=kt>Schema</span> <span class=o>|</span> <span class=nx>SchemaObject</span> <span class=o>=</span> <span class=nx>defaultPageConfig</span> <span class=o>||</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;page&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>body</span><span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;标题&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>regions</span><span class=o>:</span> <span class=p>[</span><span class=s2>&#34;body&#34;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>[</span><span class=nx>schema</span><span class=p>]</span> <span class=o>=</span> <span class=nx>useState</span><span class=p>(</span><span class=nx>defaultSchema</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>pageJsonObj</span>: <span class=kt>Schema</span> <span class=o>=</span> <span class=nx>defaultSchema</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>onChange</span> <span class=o>=</span> <span class=p>(</span><span class=nx>value</span>: <span class=kt>Schema</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>pageJsonObj</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>props</span><span class=p>.</span><span class=nx>pageChangeHandler</span> <span class=o>&amp;&amp;</span> <span class=nx>props</span><span class=p>.</span><span class=nx>pageChangeHandler</span><span class=p>(</span><span class=nx>value</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>onSave</span> <span class=o>=</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>props</span><span class=p>.</span><span class=nx>codeGenHandler</span> <span class=o>&amp;&amp;</span> <span class=nx>props</span><span class=p>.</span><span class=nx>codeGenHandler</span><span class=p>(</span><span class=nx>pageJsonObj</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>renderAmis</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;form&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>mode</span><span class=o>:</span> <span class=s2>&#34;inline&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>body</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;switch&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>option</span><span class=o>:</span> <span class=s2>&#34;预览&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;preview&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>onChange</span>: <span class=kt>function</span> <span class=p>(</span><span class=nx>v</span>: <span class=kt>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nx>setPreview</span><span class=p>(</span><span class=nx>v</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;switch&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>option</span><span class=o>:</span> <span class=s2>&#34;移动端&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;mobile&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>onChange</span>: <span class=kt>function</span> <span class=p>(</span><span class=nx>v</span>: <span class=kt>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nx>setMobile</span><span class=p>(</span><span class=nx>v</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;button&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;保存&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>level</span><span class=o>:</span> <span class=s2>&#34;primary&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>onClick</span>: <span class=kt>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nx>onSave</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;button&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;退出&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>level</span><span class=o>:</span> <span class=s2>&#34;danger&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>onClick</span>: <span class=kt>function</span> <span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=c1>// if (!window.confirm(&#39;确定退出?&#39;)) return;
</span></span></span><span class=line><span class=cl><span class=c1></span>              <span class=k>if</span> <span class=p>(</span><span class=nx>props</span><span class=p>.</span><span class=nx>cancleGenHandler</span><span class=p>)</span> <span class=nx>props</span><span class=p>.</span><span class=nx>cancleGenHandler</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>})}</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Editor</span>
</span></span><span class=line><span class=cl>        <span class=na>preview</span><span class=o>=</span><span class=p>{</span><span class=nx>preview</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=na>isMobile</span><span class=o>=</span><span class=p>{</span><span class=nx>mobile</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=na>onChange</span><span class=o>=</span><span class=p>{</span><span class=nx>onChange</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=na>value</span><span class=o>=</span><span class=p>{</span><span class=nx>schema</span> <span class=kr>as</span> <span class=nx>SchemaObject</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=na>theme</span><span class=o>=</span><span class=p>{</span><span class=s2>&#34;antd&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=na>onSave</span><span class=o>=</span><span class=p>{</span><span class=nx>onSave</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>/&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>Amis</span><span class=p>;</span>
</span></span></code></pre></div><p>在 amis 中提供了两套组件样式供我们选择,分别是 cxd(云舍)和 antd(仿 Antd),我们可以通过设置<code>Editor</code>组件中 theme 属性来进行主题的选择,同时需要引入对应的组件样式在以上代码中,我们对<code>Editor</code>组件进行了二次封装,暴露出了<code>defaultPageConfig</code>(进入编译器默认页面 JSON 配置)属性和<code>codeGenHandler</code>(代码生成保存方法),<code>cancleGenHandler</code>(退出页面编辑器方法),<code>pageChangeHandler</code>(页面改变方法)供外部使用</p><h3 id=自定义组件>自定义组件</h3><p>在 amis-editor 中使用的组件可以是我们的自定义组件.在编写自定义组件时特别需要主义的是它的 plugin 配置接下来以<code>MyButton</code>为例来进行自定义组件的介绍</p><p>首先来介绍以下组件结构</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>├─MyButton
</span></span><span class=line><span class=cl>  │  ├─comp.tsx <span class=c1># 组件本体</span>
</span></span><span class=line><span class=cl>  │  ├─index.tsx <span class=c1># 整体导出</span>
</span></span><span class=line><span class=cl>  │  ├─plugin.tsx <span class=c1># 右侧panel配置</span>
</span></span></code></pre></div><h4 id=在comptsx中主要进行组件的开发>在<code>comp.tsx</code>中主要进行组件的开发</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span> <span class=kr>from</span> <span class=s2>&#34;react&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>Schema</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis/lib/types&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Button</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;antd&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>MyButtonRender</span> <span class=o>=</span> <span class=nx>React</span><span class=p>.</span><span class=nx>forwardRef</span><span class=p>((</span><span class=nx>props</span>: <span class=kt>Schema</span><span class=p>,</span> <span class=nx>ref</span>: <span class=kt>any</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// const props = this.props
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Button</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=na>...props</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=na>ref</span><span class=o>=</span><span class=p>{</span><span class=nx>ref</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=na>type</span><span class=o>=</span><span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>level</span> <span class=o>||</span> <span class=s2>&#34;primary&#34;</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=na>name</span><span class=o>=</span><span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>name</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span><span class=nx>props</span><span class=p>.</span><span class=nx>label</span><span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>Button</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>class</span> <span class=nx>MyButtonRender2</span> <span class=kr>extends</span> <span class=nx>React</span><span class=p>.</span><span class=nx>Component</span><span class=p>&lt;</span><span class=nt>any</span><span class=err>,</span> <span class=na>any</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>handleClick</span> <span class=o>=</span> <span class=p>(</span><span class=nx>nativeEvent</span>: <span class=kt>React.MouseEvent</span><span class=p>&lt;</span><span class=nt>any</span><span class=p>&gt;)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>dispatchEvent</span><span class=p>,</span> <span class=nx>onClick</span> <span class=p>}</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// const params = this.getResolvedEventParams();
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>dispatchEvent</span><span class=p>(</span><span class=nx>nativeEvent</span><span class=p>,</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl>    <span class=nx>onClick</span><span class=o>?</span><span class=p>.({});</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>handleMouseEnter</span> <span class=o>=</span> <span class=p>(</span><span class=nx>e</span>: <span class=kt>React.MouseEvent</span><span class=p>&lt;</span><span class=nt>any</span><span class=p>&gt;)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>dispatchEvent</span> <span class=p>}</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// const params = this.getResolvedEventParams();
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>dispatchEvent</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>handleMouseLeave</span> <span class=o>=</span> <span class=p>(</span><span class=nx>e</span>: <span class=kt>React.MouseEvent</span><span class=p>&lt;</span><span class=nt>any</span><span class=p>&gt;)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>dispatchEvent</span> <span class=p>}</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// const params = this.getResolvedEventParams();
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nx>dispatchEvent</span><span class=p>(</span><span class=nx>e</span><span class=p>,</span> <span class=p>{});</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>render() {</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>MyButtonRender</span>
</span></span><span class=line><span class=cl>        <span class=na>onClick</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleClick</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=na>onMouseEnter</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleMouseEnter</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=na>onMouseLeave</span><span class=o>=</span><span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>handleMouseLeave</span><span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=p>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span><span class=k>this</span><span class=p>.</span><span class=nx>props</span><span class=p>.</span><span class=nx>label</span><span class=p>}</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;/</span><span class=nt>MyButtonRender</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>    <span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=nx>MyButtonRender2</span><span class=p>;</span>
</span></span></code></pre></div><p>在上述代码中<code>MyButtonRender</code>简单的对<code>Button</code>组件进行了简单的封装,<code>MyButtonRender2</code>对 amis 中组件的事件进行了简单的处理并暴露出去</p><p>在<code>plugin.tsx</code>中主要对<code>MyButtonRender</code>组件进行渲染器注册以及对组件的 plugin 进行配置,注册渲染器是为了将自定义组件拖入中间预览区域是可以正常的显示,这一操作与 amis 的工作原理有关(amis 的渲染过程是将 json 转成对应的 React 组件。先通过 json 的 type 找到对应的 Component，然后把其他属性作为 props 传递过去完成渲染。<a href=https://aisuda.bce.baidu.com/amis/zh-CN/docs/extend/internal target=_blank rel="noopener noreffer">工作原理
</a>)</p><h4 id=在plugintsx中进行-panel-配置>在<code>plugin.tsx</code>中进行 panel 配置</h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Renderer</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>MyButtonRender</span> <span class=kr>from</span> <span class=s2>&#34;./comp&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>BaseEventContext</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor-core&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>BasePlugin</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor-core&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>getSchemaTpl</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor-core&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span> <span class=nx>RendererPluginAction</span><span class=p>,</span> <span class=nx>RendererPluginEvent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>getEventControlConfig</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor/lib/renderer/event-control/helper&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 渲染器注册
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>Renderer</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;my-button&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>autoVar</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// eslint-disable-next-line @typescript-eslint/ban-ts-comment
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// @ts-ignore
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>})(</span><span class=nx>MyButtonRender</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>MyButton</span> <span class=kr>extends</span> <span class=nx>BasePlugin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 关联渲染器名字
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>rendererName</span> <span class=o>=</span> <span class=s2>&#34;my-button&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>$schema</span> <span class=o>=</span> <span class=s2>&#34;/schemas/ActionSchema.json&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>order</span> <span class=o>=</span> <span class=o>-</span><span class=mi>400</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// 组件名称
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>name</span> <span class=o>=</span> <span class=s2>&#34;MyButton&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>isBaseComponent</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>description</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;用来展示一个按钮，你可以配置不同的展示样式，配置不同的点击行为。&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>docLink</span> <span class=o>=</span> <span class=s2>&#34;/amis/zh-CN/components/button&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>tags</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&#34;自定义&#34;</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=nx>icon</span> <span class=o>=</span> <span class=s2>&#34;fa fa-square&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>pluginIcon</span> <span class=o>=</span> <span class=s2>&#34;button-plugin&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>scaffold</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;my-button&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;MyButton&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>wrapperBody</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>  <span class=nx>previewSchema</span>: <span class=kt>any</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;my-button&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;MyButton&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>wrapperBody</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>panelTitle</span> <span class=o>=</span> <span class=s2>&#34;MyButton&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 事件定义
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>events</span>: <span class=kt>RendererPluginEvent</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>eventName</span><span class=o>:</span> <span class=s2>&#34;click&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>eventLabel</span><span class=o>:</span> <span class=s2>&#34;点击&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>description</span><span class=o>:</span> <span class=s2>&#34;点击时触发&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>defaultShow</span>: <span class=kt>true</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>dataSchema</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>nativeEvent</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;鼠标事件对象&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>eventName</span><span class=o>:</span> <span class=s2>&#34;mouseenter&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>eventLabel</span><span class=o>:</span> <span class=s2>&#34;鼠标移入&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>description</span><span class=o>:</span> <span class=s2>&#34;鼠标移入时触发&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>dataSchema</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>nativeEvent</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;鼠标事件对象&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>eventName</span><span class=o>:</span> <span class=s2>&#34;mouseleave&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>eventLabel</span><span class=o>:</span> <span class=s2>&#34;鼠标移出&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>description</span><span class=o>:</span> <span class=s2>&#34;鼠标移出时触发&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nx>dataSchema</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=nx>properties</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>nativeEvent</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;object&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;鼠标事件对象&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>],</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// 动作定义
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>actions</span>: <span class=kt>RendererPluginAction</span><span class=p>[]</span> <span class=o>=</span> <span class=p>[];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>panelJustify</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1>// eslint-disable-next-line @typescript-eslint/no-unused-vars
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=nx>panelBodyCreator</span> <span class=o>=</span> <span class=p>(</span><span class=nx>context</span>: <span class=kt>BaseEventContext</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>getSchemaTpl</span><span class=p>(</span><span class=s2>&#34;tabs&#34;</span><span class=p>,</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;属性&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>body</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=nx>getSchemaTpl</span><span class=p>(</span><span class=s2>&#34;label&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;按钮名称&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=p>}),</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;input-text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;字段名称&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;name&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;select&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;按钮类型&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;level&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>options</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>              <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;默认&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;primary&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=p>},</span>
</span></span><span class=line><span class=cl>              <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;危险&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;danger&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=p>},</span>
</span></span><span class=line><span class=cl>              <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;警告&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;warn&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=p>},</span>
</span></span><span class=line><span class=cl>              <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;成功&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;success&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=p>},</span>
</span></span><span class=line><span class=cl>              <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;浅色&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=nx>value</span><span class=o>:</span> <span class=s2>&#34;default&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=p>},</span>
</span></span><span class=line><span class=cl>            <span class=p>],</span>
</span></span><span class=line><span class=cl>            <span class=nx>multiple</span>: <span class=kt>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>selectFirst</span>: <span class=kt>false</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=p>},</span>
</span></span><span class=line><span class=cl>          <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kr>type</span><span class=o>:</span> <span class=s2>&#34;input-text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;按钮图标&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;icon&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=c1>// 提示
</span></span></span><span class=line><span class=cl><span class=c1></span>            <span class=nx>labelRemark</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>              <span class=nx>icon</span><span class=o>:</span> <span class=s1>&#39;icon-close&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>trigger</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;hover&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>              <span class=nx>className</span><span class=o>:</span> <span class=s1>&#39;Remark--warning&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;提示&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>              <span class=nx>content</span><span class=o>:</span> <span class=s1>&#39;图标请从My Iconfont库中选择 部分图标需要加icon-前缀 如close -&gt; icon-close&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=c1>// },
</span></span></span><span class=line><span class=cl><span class=c1></span>          <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;样式&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>body</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>          <span class=nx>getSchemaTpl</span><span class=p>(</span><span class=s2>&#34;buttonLevel&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;高亮样式&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;activeLevel&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>visibleOn</span><span class=o>:</span> <span class=s2>&#34;data.active&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=p>}),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=nx>getSchemaTpl</span><span class=p>(</span><span class=s2>&#34;switch&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;block&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;块状显示&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=p>}),</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>          <span class=nx>getSchemaTpl</span><span class=p>(</span><span class=s2>&#34;size&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>label</span><span class=o>:</span> <span class=s2>&#34;尺寸&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=p>}),</span>
</span></span><span class=line><span class=cl>        <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>title</span><span class=o>:</span> <span class=s2>&#34;事件&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>className</span><span class=o>:</span> <span class=s2>&#34;p-none&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>body</span><span class=o>:</span>
</span></span><span class=line><span class=cl>          <span class=o>!!</span><span class=nx>context</span><span class=p>.</span><span class=nx>schema</span><span class=p>.</span><span class=nx>actionType</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>          <span class=p>[</span><span class=s2>&#34;submit&#34;</span><span class=p>,</span> <span class=s2>&#34;reset&#34;</span><span class=p>].</span><span class=nx>includes</span><span class=p>(</span><span class=nx>context</span><span class=p>.</span><span class=nx>schema</span><span class=p>.</span><span class=kr>type</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=o>?</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=nx>getSchemaTpl</span><span class=p>(</span><span class=s2>&#34;eventControl&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;onEvent&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                  <span class=p>...</span><span class=nx>getEventControlConfig</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>manager</span><span class=p>,</span> <span class=nx>context</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=p>}),</span>
</span></span><span class=line><span class=cl>                <span class=c1>// getOldActionSchema(this.manager, context)
</span></span></span><span class=line><span class=cl><span class=c1></span>              <span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>                <span class=nx>getSchemaTpl</span><span class=p>(</span><span class=s2>&#34;eventControl&#34;</span><span class=p>,</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                  <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;onEvent&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                  <span class=p>...</span><span class=nx>getEventControlConfig</span><span class=p>(</span><span class=k>this</span><span class=p>.</span><span class=nx>manager</span><span class=p>,</span> <span class=nx>context</span><span class=p>),</span>
</span></span><span class=line><span class=cl>                <span class=p>}),</span>
</span></span><span class=line><span class=cl>              <span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>当点选某个组件的时候，编辑器内部会触发面板构建动作，每个插件都可以通过实现 <code>buildEditorPanel</code> 来插入右侧面板。通常右侧面板都是表单配置，使用 amis 配置就可以完成。所以推荐的做法是，直接在这个插件上面定义 <code>panelBody</code> 或者 <code>panelBodyCreator</code> 即可。</p><p>具体配置可以参考上述代码,其中需要注意的是<code>getSchemaTpl</code>这一方法,该方法通过获取预先通过<code>setSchemaTpl</code>设置的模板来进行渲染某些元素组件,一下部分源码可进行参考,tpl 部分全部源码可参考<a href=https://github.com/baidu/amis/blob/master/packages/amis-editor-core/src/tpl.tsx target=_blank rel="noopener noreffer">这里</a></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>getSchemaTpl</span><span class=p>(</span>
</span></span><span class=line><span class=cl>  <span class=nx>name</span><span class=o>:</span> <span class=nx>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>patch</span><span class=o>?:</span> <span class=nx>object</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>rendererSchema</span><span class=o>?:</span> <span class=nx>any</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=o>:</span> <span class=nx>any</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>tpl</span> <span class=o>=</span> <span class=nx>tpls</span><span class=p>[</span><span class=nx>name</span><span class=p>]</span> <span class=o>||</span> <span class=p>{};</span>
</span></span><span class=line><span class=cl>  <span class=kd>let</span> <span class=nx>schema</span> <span class=o>=</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=k>typeof</span> <span class=nx>tpl</span> <span class=o>===</span> <span class=s2>&#34;function&#34;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>schema</span> <span class=o>=</span> <span class=nx>tpl</span><span class=p>(</span><span class=nx>patch</span><span class=p>,</span> <span class=nx>rendererSchema</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>schema</span> <span class=o>=</span> <span class=nx>patch</span>
</span></span><span class=line><span class=cl>      <span class=o>?</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=p>...</span><span class=nx>tpl</span><span class=p>,</span>
</span></span><span class=line><span class=cl>          <span class=p>...</span><span class=nx>patch</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>      <span class=o>:</span> <span class=nx>tpl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>schema</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kd>function</span> <span class=nx>setSchemaTpl</span><span class=p>(</span><span class=nx>name</span><span class=o>:</span> <span class=nx>string</span><span class=p>,</span> <span class=nx>value</span><span class=o>:</span> <span class=nx>any</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>tpls</span><span class=p>[</span><span class=nx>name</span><span class=p>]</span> <span class=o>=</span> <span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>在<code>index.tsx</code>中主要进行自定义组件插件的注册以及导出</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>registerEditorPlugin</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>MyButton</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;./plugin&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>registerEditorPlugin</span><span class=p>(</span><span class=nx>MyButton</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=其他>其他</h3><p>在拖拽组件生成页面时,amis-editor 可选择的组件有很多,如果我们想使用自己组建的同时忽略隐藏原有组件可以通过<code>disabledRendererPlugin</code>来对原生组件进行隐藏</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>registerEditorPlugin</span><span class=p>,</span> <span class=nx>BasePlugin</span> <span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=kr>type</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>RendererEventContext</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>SubRendererInfo</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>BasicSubRenderInfo</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span> <span class=kr>from</span> <span class=s2>&#34;amis-editor&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cm>/**
</span></span></span><span class=line><span class=cl><span class=cm> * 用于隐藏一些不需要的Editor组件
</span></span></span><span class=line><span class=cl><span class=cm> * 备注: 如果不知道当前Editor中有哪些预置组件，可以在这里设置一个断点，console.log 看一下 renderers。
</span></span></span><span class=line><span class=cl><span class=cm> */</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 需要在组件面板中隐藏的组件
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>const</span> <span class=nx>disabledRenderers</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=c1>// &#39;flex&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;crud2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;crud2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;crud2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// &#39;crud&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// &#39;input-text&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;input-email&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-password&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-url&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// &#34;button&#34;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;reset&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;submit&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;tpl&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;grid&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;container&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// &#39;flex&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// &#39;flex&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;collapse-group&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;panel&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;tabs&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// &#39;form&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;service&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;textarea&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-number&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=c1>// &#39;select&#39;,
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=s2>&#34;nested-select&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;chained-select&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;dropdown-button&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;checkboxes&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;radios&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;checkbox&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-date&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-date-range&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-file&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-image&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-excel&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-tree&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-tag&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;list-select&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;button-group-select&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;button-toolbar&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;picker&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;switch&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-range&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-rating&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-city&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;transfer&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;tabs-transfer&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-color&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;condition-builder&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;fieldset&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;combo&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-group&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-table&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;matrix-checkboxes&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-rich-text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;diff-editor&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;editor&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;search-box&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-kv&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-repeat&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;uuid&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;location-picker&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-sub-form&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;hidden&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;button-group&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;nav&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;anchor-nav&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;tooltip-wrapper&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;alert&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;wizard&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;table-view&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;web-component&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;audio&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;video&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;custom&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;tasks&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;each&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;property&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;iframe&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;qrcode&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;icon&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;link&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;list&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;mapping&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;avatar&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;card&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;card2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;cards&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;table&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;table2&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;chart&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;sparkline&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;carousel&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;image&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;images&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;date&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;time&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;datetime&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;tag&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;progress&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;status&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;steps&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;timeline&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;divider&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;code&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;markdown&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;collapse&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;log&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-array&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;control&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-datetime&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-datetime-range&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;formula&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;group&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-month&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-month-range&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-quarter&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-quarter-range&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;static&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-time&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-time-range&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;tree-select&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-year&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;input-year-range&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;breadcrumb&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;custom&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;hbox&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;page&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;pagination&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;plain&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;wrapper&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;column-toggler&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>ManagerEditorPlugin</span> <span class=kr>extends</span> <span class=nx>BasePlugin</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>order</span> <span class=o>=</span> <span class=mi>9999</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nx>buildSubRenderers</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>context</span>: <span class=kt>RendererEventContext</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>renderers</span>: <span class=kt>SubRendererInfo</span><span class=p>[]</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span><span class=o>:</span> <span class=nx>BasicSubRenderInfo</span> <span class=o>|</span> <span class=nx>BasicSubRenderInfo</span><span class=p>[]</span> <span class=o>|</span> <span class=k>void</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// 更新NPM自定义组件排序和分类
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// console.log(renderers);
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=k>for</span> <span class=p>(</span><span class=kd>let</span> <span class=nx>index</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=nx>size</span> <span class=o>=</span> <span class=nx>renderers</span><span class=p>.</span><span class=nx>length</span><span class=p>;</span> <span class=nx>index</span> <span class=o>&lt;</span> <span class=nx>size</span><span class=p>;</span> <span class=nx>index</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=c1>// 判断是否需要隐藏 Editor预置组件
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=kr>const</span> <span class=nx>pluginRendererName</span> <span class=o>=</span> <span class=nx>renderers</span><span class=p>[</span><span class=nx>index</span><span class=p>].</span><span class=nx>rendererName</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>pluginRendererName</span> <span class=o>&amp;&amp;</span>
</span></span><span class=line><span class=cl>        <span class=nx>disabledRenderers</span><span class=p>.</span><span class=nx>indexOf</span><span class=p>(</span><span class=nx>pluginRendererName</span><span class=p>)</span> <span class=o>&gt;</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>      <span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>renderers</span><span class=p>[</span><span class=nx>index</span><span class=p>].</span><span class=nx>disabledRendererPlugin</span> <span class=o>=</span> <span class=kc>true</span><span class=p>;</span> <span class=c1>// 更新状态
</span></span></span><span class=line><span class=cl><span class=c1></span>      <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>registerEditorPlugin</span><span class=p>(</span><span class=nx>ManagerEditorPlugin</span><span class=p>);</span>
</span></span></code></pre></div><h3 id=写在最后>写在最后</h3><p>一个阶段的结束伴随着另一个阶段的开始,在新的阶段中会继续学习继续进步,如文章有问题通过页脚邮箱进行联系</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2023-06-24</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://plumliil.cn/posts/20230624-%E7%99%BE%E5%BA%A6amis+react%E5%AE%9E%E8%B7%B5/ data-title=百度Amis+React实践 data-hashtags=React,Amis,低代码><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=https://plumliil.cn/posts/20230624-%E7%99%BE%E5%BA%A6amis+react%E5%AE%9E%E8%B7%B5/ data-title=百度Amis+React实践><i class="fab fa-hacker-news fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=https://plumliil.cn/posts/20230624-%E7%99%BE%E5%BA%A6amis+react%E5%AE%9E%E8%B7%B5/><i class="fab fa-reddit fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/react/>React</a>,&nbsp;<a href=/tags/amis/>Amis</a>,&nbsp;<a href=/tags/%E4%BD%8E%E4%BB%A3%E7%A0%81/>低代码</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/20230507-react%E4%BD%BF%E7%94%A8%E4%B8%AD%E5%B8%B8%E7%8A%AF%E7%9A%84%E9%94%99%E8%AF%AF/ class=prev rel=prev title=React使用中常犯的错误><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>React使用中常犯的错误</a>
<a href=/posts/20230702-react%E4%B8%AD%E7%BC%96%E5%86%99%E8%87%AA%E5%AE%9A%E4%B9%89hook/ class=next rel=next title=React中编写操作树形数据的自定义Hook>React中编写操作树形数据的自定义Hook<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2021 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Plumliil</a></span>&nbsp;|&nbsp;<span class=license>MIT</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:50},comment:{},data:{"id-1":"Plumliil Blog","id-2":"Plumliil Blog"},search:{algoliaAppID:"XDAAF3RRN2",algoliaIndex:"Prod_Plumliil_Blog",algoliaSearchKey:"1be2ecd1b6bf627a63117d958f5c51d7",highlightTag:"em",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"algolia"},typeit:{cursorChar:"|",cursorSpeed:1e3,data:{"id-1":["id-1"],"id-2":["id-2"]},duration:-1,speed:100}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-DWDPX2NGYH",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-DWDPX2NGYH" async></script></body></html>